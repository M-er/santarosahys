!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/material"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("@tres-erres/ngx-utils",["exports","@angular/material","@angular/core","@angular/common"],t):t((e["tres-erres"]=e["tres-erres"]||{},e["tres-erres"]["ngx-utils"]={}),e.ng.material,e.ng.core,e.ng.common)}(this,function(e,t,r,n){"use strict";var a=function(){function e(e){this.el=e,this.regex=new RegExp(/^-?[0-9]+(\.[0-9]*){0,1}$/g),this.specialKeys=["Backspace","Tab","End","Home","-","ArrowLeft","ArrowRight"]}return e.prototype.onKeyDown=function(e){var t=this.el.nativeElement.value;if("."===e.key){if(0===t.length)return e.target.value="0.",void e.preventDefault();if("-"===t)return e.target.value="-0.",void e.preventDefault()}if("-"===e.key&&0<t.length&&e.preventDefault(),-1===this.specialKeys.indexOf(e.key)){if(-1!==t.indexOf("."))1<t.split(".")[1].length&&e.preventDefault();var r=t.concat(e.key);r&&!String(r).match(this.regex)&&e.preventDefault()}},e.decorators=[{type:r.Directive,args:[{selector:"[trImporte]"}]}],e.ctorParameters=function(){return[{type:r.ElementRef}]},e.propDecorators={onKeyDown:[{type:r.HostListener,args:["keydown",["$event"]]}]},e}(),s=function(){function e(e,t){this.el=e,this.snackBar=t,this.regex=new RegExp(/^[0-9]$/g),this.specialKeys=["Tab","End","Home","-","ArrowLeft","ArrowRight"]}return e.prototype.onKeyDown=function(e){var t=this;if(-1===this.specialKeys.indexOf(e.key)){var r=String(e.key).match(this.regex);if(r||"Enter"===e.key||"-"===e.key||"Backspace"===e.key){var n=this.el.nativeElement.value,a=this.el.nativeElement.value.concat(e.key);if(0===this.el.nativeElement.selectionStart&&this.el.nativeElement.selectionEnd===n.length&&0<n.length&&r)return e.target.value=e.key,void e.preventDefault();if(13<a.length&&"Enter"!==e.key&&"Backspace"!==e.key)e.preventDefault();else{if("Backspace"===e.key&&0<n.length){if("-"!==n.substring(n.length-1,n.length))return;e.target.value=n.substring(0,n.length-2)}else if(r)2===a.length||11===a.length?e.target.value=n+e.key+"-":e.target.value=n+e.key;else if("Enter"===e.key){var s={msg:"",pos:0},i=2*Number.parseInt(n.substr(10,1),10)+3*Number.parseInt(n.substr(9,1),10)+4*Number.parseInt(n.substr(8,1),10)+5*Number.parseInt(n.substr(7,1),10);i+=6*Number.parseInt(n.substr(6,1),10)+7*Number.parseInt(n.substr(5,1),10)+2*Number.parseInt(n.substr(4,1),10)+3*Number.parseInt(n.substr(3,1),10);var o=(i+=4*Number.parseInt(n.substr(1,1),10)+5*Number.parseInt(n.substr(0,1),10))%11;0!==o&&(o=11-o),13!==n.length?(s.msg="El CUIT debe contener 13 números",s.pos=13):10===o||-1===[20,23,27,30,33].indexOf(Number(n.substr(0,2)))?(s.msg="CUIT incorrecto",s.pos=0):o!==Number.parseInt(n.substr(12,1),10)&&(s.msg='El CUIT debería terminar en "'+o+'"',s.pos=e.target.value.length-1),s.msg.length&&setTimeout(function(){t.snackBar.open(s.msg,"Cerrar",{duration:5e3,panelClass:"snack",verticalPosition:"bottom",horizontalPosition:"start"}),e.target.value=e.target.value.substr(0,s.pos),e.target.focus(),e.target.selectionStart=e.target.selectionEnd=e.target.value.length},100)}e.preventDefault()}}else e.preventDefault()}},e.decorators=[{type:r.Directive,args:[{selector:"[trCuit]"}]}],e.ctorParameters=function(){return[{type:r.ElementRef},{type:t.MatSnackBar}]},e.propDecorators={onKeyDown:[{type:r.HostListener,args:["keydown",["$event"]]}]},e}(),i=function(){function e(e){this.el=e,this.regex=new RegExp(/^[0-9]$/g),this.specialKeys=["Backspace","Tab","End","Home","-","ArrowLeft","ArrowRight"]}return e.prototype.onKeyDown=function(e){if(-1===this.specialKeys.indexOf(e.key)){var t=String(e.key).match(this.regex);if(t||"Enter"===e.key){var r=this.el.nativeElement.value,n=this.el.nativeElement.value.concat(e.key);if(0===this.el.nativeElement.selectionStart&&this.el.nativeElement.selectionEnd===r.length&&0<r.length&&t)return e.target.value=e.key,void e.preventDefault();if(13<n.length&&"Enter"!==e.key)e.preventDefault();else if("Enter"===e.key){var a=r.indexOf("-");if(-1===a)e.target.value="0000-"+"0".repeat(8-r.length)+r;else{var s=r.replace("-","");e.target.value="0".repeat(4-s.substring(0,a).length)+s.substring(0,a)+"-"+"0".repeat(8-s.substring(a,s.length).length)+s.substring(a,s.length)}}else 4!==r.length||r.includes("-")||(e.target.value=r+"-"+e.key,e.preventDefault())}else e.preventDefault()}},e.decorators=[{type:r.Directive,args:[{selector:"[trComprobante]"}]}],e.ctorParameters=function(){return[{type:r.ElementRef}]},e.propDecorators={onKeyDown:[{type:r.HostListener,args:["keydown",["$event"]]}]},e}(),o=function(){function e(){}return e.prototype.transform=function(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=","),void 0===n&&(n=".");var a="";if(t||(a="0.00"),e&&!isNaN(e)||(e=0),0===(e=e.toString().replace(/\$|\,/g,"")))return a;var s=Number.parseFloat(e)===Math.abs(Number.parseFloat(e));e=Math.abs(Number.parseFloat(e));var i=(e=Math.floor(100*Number.parseFloat(e)+.50000000001))%100;i<10&&(i="0"+i),e=Math.floor(e/100).toString();for(var o=0;o<Math.floor((e.length-(1+o))/3);o++)e=e.substring(0,e.length-(4*o+3))+r+e.substring(e.length-(4*o+3));return(s?"":"-")+e+n+i},e.decorators=[{type:r.Pipe,args:[{name:"numform"}]}],e}(),l=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{declarations:[a,s,i,o],imports:[n.CommonModule],exports:[a,s,i,o]}]}],e}();e.ImporteDirective=a,e.CuitDirective=s,e.ComprobanteDirective=i,e.NumformPipe=o,e.UtilsModule=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=tres-erres-ngx-utils.umd.min.js.map